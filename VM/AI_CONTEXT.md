# AI CONTEXT: LOGOS FHE ACCELERATOR EMULATOR

## 1. Суть Проекта
Аппаратно-программный эмулятор FHE-ускорителя (схема BFV) на базе Verilator (RTL) и Python (SDK).
Цель: Прототипирование архитектуры ASIC для гомоморфного шифрования.

## 2. Текущий Статус (Phase 3 Completed)
*   **Версия:** v3.0 (Diamond Loop Verified).
*   **Возможности:**
    *   RNS-арифметика (поддержка множества модулей).
    *   Векторный ALU (Add, Sub, Mult).
    *   Многобанковая память (4 слота по 4096 слов).
    *   Command Processor (ISA v1.0).
    *   Интеграция с Microsoft SEAL (через C++ Bridge).
*   **Достижение:** Успешное выполнение $C_{res} = C_1 \cdot C_2 + C_3$ в железе с верификацией через SEAL.

## 3. Технический Стек & Ограничения ("Красные Линии")
*   **RTL (SystemVerilog):**
    *   Строго **синтезируемый код** (никаких `%` или `/`, только Barrett Reduction).
    *   Память: `bit [63:0]` (2-state) для совместимости с DPI.
    *   Verilator flags: `--output-split 0` (обязательно для линковки).
*   **Driver (C++17):**
    *   DPI-функции должны принимать `svOpenArrayHandle` для массивов.
    *   Обязательна реализация `double sc_time_stamp()`.
    *   SEAL объекты управляются через `std::shared_ptr`.
*   **SDK (Python):**
    *   `LogosContext` управляет памятью слотов.
    *   NTT/INTT требуют явного управления твиддлами (`OPC_LOAD_W`).

## 4. Словарь Терминов
*   **Twiddles:** Поворотные множители (Roots of Unity). Хранятся в `w_mem`.
*   **Slot:** Банк памяти (4096 слов). Эмулятор имеет 4 слота.
*   **Diamond Loop:** Полный интеграционный тест (SEAL -> HW -> SEAL).
*   **Sticky Halt:** Состояние зависания процессора команд, требующее `reset_state()`.
