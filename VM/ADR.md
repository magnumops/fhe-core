# Architectural Decision Records (ADR) - Phase 3

## ADR-001: Синтезируемая Арифметика (Barrett Reduction)
*   **Дата:** Day 1 (Phase 3)
*   **Проблема:** Операторы `%` и `/` в Verilog не синтезируемы эффективно.
*   **Решение:** Использовать редукцию Барретта с предвычисленной константой $\mu$.

## ADR-002: Выделенный Vector ALU
*   **Дата:** Day 2 (Phase 3)
*   **Проблема:** Монолитный дизайн.
*   **Решение:** Выделить комбинаторный модуль `vec_alu.v` для операций ADD/SUB/MULT.

## ADR-003: Динамические RNS Параметры
*   **Дата:** Day 3 (Phase 3)
*   **Проблема:** Жесткая привязка к одному модулю Q.
*   **Решение:** Пробрасывать `q, mu, n_inv` как входные сигналы через всю иерархию.

## ADR-004: Command Processor ISA
*   **Дата:** Day 4 (Phase 3)
*   **Проблема:** Управление через `start/mode` пины не масштабируется.
*   **Решение:** Внедрить ISA (64-bit instruction). Opcode (8b) + Payload (56b).
*   **Связь:** C++ пишет в очередь, Verilog читает через DPI `dpi_get_cmd`.

## ADR-005: Multi-Bank Memory
*   **Дата:** Day 5 (Phase 3)
*   **Проблема:** Stateless режим требует постоянной пересылки данных.
*   **Решение:** Внутренняя память 4 слота x 4096 слов. Команды LOAD/STORE для DMA. NTT работает in-place над слотом.
